<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">



<title>
  
    Developer Guide: Getting Started
  
</title>

<meta name="description" content="A visualization in SKQW is a JavaScript module in the commonjs format. Since SKQW is implemented on top of the Electron platform, which uses recent versions of Node and Chrome, you are free to use (mo">
<meta property="og:type" content="website">
<meta property="og:title" content="Developer Guide: Getting Started">
<meta property="og:url" content="http://michaelbromley.github.io/skqw/developer-guide-getting-started/index.html">
<meta property="og:site_name" content="SKQW">
<meta property="og:description" content="A visualization in SKQW is a JavaScript module in the commonjs format. Since SKQW is implemented on top of the Electron platform, which uses recent versions of Node and Chrome, you are free to use (mo">
<meta property="og:image" content="http://michaelbromley.github.io/skqw/images/screenshot-01.jpg">
<meta property="og:updated_time" content="2017-03-08T19:39:04.296Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Developer Guide: Getting Started">
<meta name="twitter:description" content="A visualization in SKQW is a JavaScript module in the commonjs format. Since SKQW is implemented on top of the Electron platform, which uses recent versions of Node and Chrome, you are free to use (mo">
<meta name="twitter:image" content="http://michaelbromley.github.io/skqw/images/screenshot-01.jpg">
<meta name="twitter:creator" content="@michlbrmly">


  <link rel="alternative" href="/atom.xml" title="SKQW" type="application/atom+xml">



  <link rel="icon" href="images/favicon.ico">


<link rel="stylesheet" href="/skqw/styles/main.css">




</head>
<body
        
        class="monochrome"
        
>
<div class="mobile-header">
  <button class="sidebar-toggle" type="button">
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
  </button>
  <a class="title" href="/skqw/">
    <img src="/skqw/images/logo-line.svg" class="mobile-header-logo">
  </a>
</div>

<div class="main-container">
  <div class="sidebar">
  <div class="header">
    <a href="/skqw/">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="597" height="197" class="logo" viewBox="0 0 597 197" preserveAspectRatio="xMidYMid meet">
  <rect id="backgroundrect" width="100%" height="100%" x="0" y="0" fill="none" stroke="none"/>
    <g transform="translate(-96.146 -485.097)"  stroke="#4fd6cb" fill="none">
        <path d="M511.482 492.87v159.604l90.712-159.464z"  />
        <path d="M590.703 522.98l16-29.564h76.566l-33.485 57.994-58.624 101.54z"  />
        <path d="M383.643 644.29l87.6-151.727H395.07l-11.116 19.256z"  />
        <path d="M476.5 620.352l-27.972 48.45h28.686z"  />
        <path d="M249.643 644.29l87.6-151.727h-87.6z"  />
        <path d="M250 653.22l52.28-90.554 48.023 89.91z"  />
        <path d="M140.36 601.368l-34.84-60.34 27.974-48.45h68.76z"  stroke-width="1.013" />
        <path d="M384.357 653.22l92.26-159.798v103.012L443.783 653.3z"  />
        <path d="M178.854 543.765l34.838 60.34-27.973 48.45h-68.76z"  stroke-width="1.013" />
    </g>
</svg>

    </a>
    <div class="info">
      <div class="content">
        
      </div>
    </div>
  </div>
  <div class="body">
    
    
    <ul class="nav">
      
      

      
      <li class="section-title">
        <span>User Guide</span>
      </li>
      
      
      
      

      
      <li>
        <a href="/skqw/getting-started" title="Getting Started">Getting Started</a>
      </li>
      
      
      
      

      
      <li>
        <a href="/skqw/how-to" title="How To Guides">How To Guides</a>
      </li>
      
      
      
    </ul>
    
    <ul class="nav">
      
      

      
      <li class="section-title">
        <span>Developer Guide</span>
      </li>
      
      
      
      

      
      <li>
        <a href="/skqw/developer-guide-getting-started" title="Getting Started">Getting Started</a>
      </li>
      
      
      
      

      
      <li>
        <a href="/skqw/parameters" title="Parameters">Parameters</a>
      </li>
      
      
      
      

      
      <li>
        <a href="/skqw/using-three-js" title="Using Three.js">Using Three.js</a>
      </li>
      
      
      
      

      
      <li>
        <a href="/skqw/api-reference" title="API Reference">API Reference</a>
      </li>
      
      
      
      

      
      <li>
        <a href="/skqw/skqw-core-module" title="skqw-core">skqw-core</a>
      </li>
      
      
      
    </ul>
    
    <ul class="nav">
      
      

      
      <li class="section-title">
        <span>Links</span>
      </li>
      
      
      
      

      
      <li>
        <a href="https://github.com/michaelbromley/skqw" title="SKQW on Github" target="_blank" rel="external">SKQW on Github</a>
      </li>
      
      
      
      

      
      <li>
        <a href="https://twitter.com/michlbrmly" title="@michlbrmly" target="_blank" rel="external">@michlbrmly</a>
      </li>
      
      
      
    </ul>
    
    
  </div>
</div>

  <div class="main-content">
    
    <div style="max-width: 800px">
      
      <article id="page-undefined" class="article article-type-page">
  
    <h1 class="article-header">
      Developer Guide: Getting Started
    </h1>
  
  

  <div class="article-info">
    <span class="article-date">
  Updated: 2017-03-08
</span>

    

    

  </div>
  <div class="article-entry">
    <p>A visualization in SKQW is a JavaScript module in the commonjs format. Since SKQW is implemented on top of the Electron platform, which uses recent versions of Node and Chrome, you are free to use (most) ES2015 language features. One notable exception is that module imports and exports must be in the <a href="https://nodejs.org/docs/latest/api/modules.html" target="_blank" rel="external">Node commonjs</a> (<code>module.exports</code> and <code>require()</code>) format.</p>
<h2 id="File-Location-amp-Naming"><a href="#File-Location-amp-Naming" class="headerlink" title="File Location &amp; Naming"></a>File Location &amp; Naming</h2><p>A visualization main file must be located in a subdirectory of the “library path” (as set in the UI), and must be named “index.js”:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">// &quot;visualizations&quot; is set as the library path in the app.</div><div class="line"></div><div class="line">- visualizations/</div><div class="line">    |</div><div class="line">    |- myVis/</div><div class="line">    |   |- index.js</div><div class="line">    |</div></pre></td></tr></table></figure>
<h2 id="Basic-Example"><a href="#Basic-Example" class="headerlink" title="Basic Example"></a>Basic Example</h2><p>Here is a bare-bones visualization:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> &#123;createCanvas, getSample, getDimensions&#125; = <span class="built_in">require</span>(<span class="string">'skqw-core'</span>);</div><div class="line"></div><div class="line"><span class="comment">// canvas context.</span></div><div class="line"><span class="keyword">let</span> ctx;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">init</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    ctx = createCanvas().getContext(<span class="string">'2d'</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">tick</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">const</span> &#123; width, height &#125; = getDimensions();</div><div class="line">    <span class="keyword">const</span> &#123; ft &#125; = getSample();</div><div class="line"></div><div class="line">    <span class="comment">// clear the canvas.</span></div><div class="line">    ctx.fillStyle = <span class="string">'rgba(0, 0, 0, 1)'</span>;</div><div class="line">    ctx.fillRect(<span class="number">0</span>, <span class="number">0</span>, width, height);</div><div class="line">    </div><div class="line">    <span class="comment">// draw the visualization frame</span></div><div class="line">    drawBars(width, height, ft);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">drawBars</span>(<span class="params">w, h, ft</span>) </span>&#123;</div><div class="line">    <span class="keyword">const</span> length = ft.length;</div><div class="line">    <span class="keyword">const</span> width = w / length;</div><div class="line">    </div><div class="line">    <span class="comment">// The bars will be red</span></div><div class="line">    ctx.fillStyle = <span class="string">`hsla(0, 50%, 50%, 0.8)`</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; ft.length; i++) &#123;</div><div class="line">        <span class="keyword">const</span> height = ft[i] * <span class="number">250</span>;</div><div class="line">        <span class="keyword">const</span> x = i * width;</div><div class="line">        <span class="keyword">const</span> y = h - height;</div><div class="line">        ctx.fillRect(x, y, width - <span class="number">2</span>, height);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">    <span class="attr">name</span>: <span class="string">'Simple Example'</span>,</div><div class="line">    init,</div><div class="line">    tick</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>The code above will display a simple frequency spectrum of red bars. Let’s take a look at each of the basic parts:</p>
<h4 id="Importing-from-skqw-core"><a href="#Importing-from-skqw-core" class="headerlink" title="Importing from skqw-core"></a>Importing from <code>skqw-core</code></h4><p>The <code>skqw-core</code> module exports a few functions that you’ll need for your visualization. Note - you don’t need to “install” <code>skqw-core</code>, it is provided by SKQW itself. See the <a href="../skqw-core-module">skqw-core module documentation</a> for a description of the exported functions.</p>
<h4 id="init-function"><a href="#init-function" class="headerlink" title="init() function"></a><code>init()</code> function</h4><p>Every visualization <em>must</em> export an <code>init()</code> function. This function will be called once each time the visualization is selected in SKQW. It is used to set up the canvas as well as any other set-up your code may require. In this case we use <code>createCanvas()</code> to create a new canvas for us to draw to, and save a reference to the canvas’ <a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D" target="_blank" rel="external">context object</a>.</p>
<h4 id="tick-function"><a href="#tick-function" class="headerlink" title="tick() function"></a><code>tick()</code> function</h4><p>This is a required function which will be called every time a new audio sample arrives from the sound card, roughly 60 times per second. This is<br>where the magic happens! The <code>tick</code> function is responsible for rendering each individual frame of your visualization.</p>
<p>In our example, we first clear the canvas by drawing a big black rectangle over whatever was there before, and then we call a function which will<br>iterate over each value in the <code>getSample().ft</code> array (which is the frequency spectrum), and represent it as a red bar whose height is proportional to the value of that frequency.</p>
<h4 id="module-exports"><a href="#module-exports" class="headerlink" title="module.exports"></a><code>module.exports</code></h4><p>Finally, we export the required information as a <a href="https://nodejs.org/docs/latest/api/modules.html" target="_blank" rel="external">Node commonjs</a> module. There are more functions and properties which SKQW can read (see the <a href="../api-reference">API docs</a>), which lets us write richer visualizations, but the three shown are the bare minimum required for things to work.</p>
<h2 id="Next-Steps"><a href="#Next-Steps" class="headerlink" title="Next Steps"></a>Next Steps</h2><p>Now you should know enough to start playing around with SKQW visualizations and creating some cool visuals!</p>
<p>There are a few more parts of the API not covered above. For a full rundown of all APIs, see the <a href="../api-reference">API Reference</a>.</p>
<p>Another way to learn is to take a look at the <a href="https://github.com/michaelbromley/skqw-library" target="_blank" rel="external">source code of the standard library of visualizations</a>. </p>

  </div>
  <footer class="article-footer">

  </footer>
</article>


      <div class="main-footer">
    © 2017 Michael Bromley - Powered by <a href="http://hexo.io" target="_blank">Hexo</a>
</div>

      
    </div>
    
  </div>
</div>
<script src="/skqw/scripts/main.js"></script>
</body>
</html>
